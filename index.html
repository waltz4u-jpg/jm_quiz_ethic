<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì§€ë¯¼ì´ì˜ 3ë¶„í•™ìŠµ í¬ì¼“ì•±</title>

<script src="https://cdn.tailwindcss.com"></script>

<style>
body {
  background: linear-gradient(135deg, #e9d5ff, #fbcfe8);
}
.glass {
  background: rgba(255,255,255,0.85);
  backdrop-filter: blur(12px);
}
.fade {
  animation: fadeIn 0.4s ease-in-out;
}
@keyframes fadeIn {
  from {opacity:0; transform: translateY(10px);}
  to {opacity:1; transform: translateY(0);}
}
</style>
</head>

<body class="flex items-center justify-center min-h-screen">

<div class="w-full max-w-md p-6">

  <!-- ğŸŒ¸ ì‹œì‘ í™”ë©´ -->
  <div id="startScreen" class="glass rounded-3xl shadow-2xl p-10 text-center fade">

    <h1 class="text-3xl font-bold text-purple-700 mb-4">
      ì§€ë¯¼ì´ì˜ 3ë¶„í•™ìŠµ*
    </h1>

    <p class="text-sm text-gray-500 mb-2">ê°ê°ì„ ë‹¨ë‹¨í•˜ê²Œ ë§Œë“œëŠ” ì‹œê°„</p>

    <p id="greeting" class="text-lg text-gray-700 mb-8"></p>

    <button onclick="startQuiz()"
      class="w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-full shadow-lg hover:scale-105 transition">
      í•™ìŠµ ì‹œì‘í•˜ê¸° âœ¨
    </button>
  </div>

  <!-- ğŸŒ¿ ë¬¸ì œ í™”ë©´ -->
  <div id="quizScreen" class="hidden glass rounded-3xl shadow-2xl p-8 text-center fade">

    <h2 id="question" class="mb-8 text-lg font-semibold leading-relaxed"></h2>

    <div class="flex justify-center gap-8 mb-6">
      <button onclick="checkAnswer('O')"
        class="w-24 h-24 bg-blue-200 rounded-full text-2xl font-bold hover:bg-blue-400 transition">
        O
      </button>

      <button onclick="checkAnswer('X')"
        class="w-24 h-24 bg-red-200 rounded-full text-2xl font-bold hover:bg-red-400 transition">
        X
      </button>
    </div>

    <!-- ğŸ’¡ ê²°ê³¼ í”¼ë“œë°± ì˜ì—­ -->
    <div id="feedbackBox" class="hidden bg-white rounded-2xl p-5 shadow-inner text-left fade">
      <p id="feedbackResult" class="text-xl font-bold mb-3"></p>
      <p id="feedbackText" class="text-gray-700 leading-relaxed"></p>
    </div>

  </div>

  <!-- ğŸŒŸ ìµœì¢… ê²°ê³¼ í™”ë©´ -->
  <div id="resultScreen" class="hidden glass rounded-3xl shadow-2xl p-10 text-center fade">

    <h2 class="text-2xl font-bold text-purple-700 mb-4">
      ì˜¤ëŠ˜ì˜ ê²°ê³¼ âœ¨
    </h2>

    <p id="scoreText" class="text-lg mb-8"></p>

    <button onclick="restartQuiz()"
      class="w-full py-3 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-full shadow-lg hover:scale-105 transition">
      ë˜ í•˜ê³  ì‹¶ì–´ìš” ğŸ¨
    </button>

  </div>

</div>

<script>

const sheetURL = "https://opensheet.elk.sh/1aWuK6r5KQ7oOXqUmPkYDLVF1kb9sWAAvdbIgsgGUJ7k/Sheet1";

let questions = [];
let selected = [];
let current = 0;
let score = 0;

const greetings = [
  "ì˜¤ëŠ˜ë„ ê°ê° í›ˆë ¨ ì‹œì‘ ğŸ¨",
  "ì…ì‹œìƒ ëª¨ë“œ ON âœ¨",
  "3ë¶„ ì§‘ì¤‘, ì‹¤ë ¥ ìƒìŠ¹ ğŸ’ª",
  "ì§€ë¯¼ì´ì˜ ì„±ì¥ íƒ€ì„ ğŸŒ¿",
  "í•œ ë¬¸ì œì”©, ë‹¨ë‹¨í•˜ê²Œ ğŸŒ¸"
];

document.getElementById("greeting").innerText =
  greetings[Math.floor(Math.random() * greetings.length)];

function startQuiz() {
  fetch(sheetURL)
    .then(res => res.json())
    .then(data => {

      questions = data;
      selected = shuffleArray(questions).slice(0,5);
      current = 0;
      score = 0;

      document.getElementById("startScreen").classList.add("hidden");
      document.getElementById("resultScreen").classList.add("hidden");
      document.getElementById("quizScreen").classList.remove("hidden");

      showQuestion();
    });
}

function showQuestion() {
  const q = selected[current];

  document.getElementById("question").innerText =
    `Q${current+1}. ${q.problem}`;

  document.getElementById("feedbackBox").classList.add("hidden");
}

function checkAnswer(choice) {

  const correct = String(selected[current].answer).trim().toUpperCase();

  const resultText = document.getElementById("feedbackResult");
  const explainText = document.getElementById("feedbackText");
  const box = document.getElementById("feedbackBox");

  if(choice.toUpperCase() === correct) {
    score++;
    resultText.innerText = "ì •ë‹µì´ì—ìš” âœ¨";
    resultText.className = "text-xl font-bold text-blue-600 mb-3";
  } else {
    resultText.innerText = "ì•„ì‰¬ì›Œìš” ğŸ¥²";
    resultText.className = "text-xl font-bold text-red-500 mb-3";
  }

  explainText.innerText = selected[current].explanation || "";
  box.classList.remove("hidden");

  setTimeout(() => {
    current++;
    if(current < selected.length) {
      showQuestion();
    } else {
      showResult();
    }
  }, 1800);
}

function showResult() {
  document.getElementById("quizScreen").classList.add("hidden");
  document.getElementById("resultScreen").classList.remove("hidden");

  document.getElementById("scoreText").innerText =
    `5ë¬¸ì œ ì¤‘ ${score}ê°œ ì •ë‹µ ğŸ‰`;
}

function restartQuiz() {
  // ë°”ë¡œ ì²« ë¬¸ì œë¡œ ì‹œì‘
  startQuiz();
}

function shuffleArray(array) {
  return array.sort(() => Math.random() - 0.5);
}

</script>

</body>
</html>

